<!DOCTYPE html>
<html>
<head>
  <title>Шаблоны проектирования</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="">
    <meta property="og:description" content="" />
    
    <meta name="author" content="Шаблоны проектирования" />

    

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="shortcut icon" type="image/x-icon" href="/design-patterns/images/favicon.ico" >
  <link rel="stylesheet" type="text/css" href="/design-patterns/style.css"/>
  <link rel="alternate" type="application/rss+xml" title="Шаблоны проектирования - "
        href="/design-patterns/feed.xml"/>

  <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
</head>

<body>
<div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      <a href="/design-patterns/" class="site-avatar"><img src="/design-patterns/images/logo.png"/></a>

      <div class="site-info">
        <h1 class="site-name"><a href="/design-patterns/">Шаблоны проектирования</a></h1>
      </div>

      <nav id="main">
        <a href="/design-patterns/" >Главная</a>
        <a href="/design-patterns/creational/"  class="active">Порождающие шаблоны</a>
        <a href="/design-patterns/behavioral/" >Шаблоны поведения</a>
        <a href="/design-patterns/structural/" >Структурные шаблоны</a>
      </nav>
    </header>
  </div>
</div>

<div id="main" role="main" class="container">
  

  <nav class="breadcrumbs hidden-sm-down">

    <a class="breadcrumb-item" href=http://nixsolutions.github.io/design-patterns/>Шаблоны проектирования</a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

      <!-- Skip if root -->
      
        

      <!-- Skip if root -->
      

      <!-- Skip if language directory -->
      

      <!-- Get breadcrumb title. Insert snippet from configuration description to translates breadcrumb if language plugin is installed and YAML subset is set -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
        <a property="item" typeof="WebPage" href="http://nixsolutions.github.io/design-patterns/creational/">
        <span property="name">Порождающие Шаблоны</span>
        </a>
        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Skip if language directory -->
      

      <!-- Get breadcrumb title. Insert snippet from configuration description to translates breadcrumb if language plugin is installed and YAML subset is set -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">
        
        <span property="name">Простая Фабрика</span>
        
        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>


  <article class="page">

  <h1></h1>

  <div class="entry">
    <p><img src="/design-patterns/patterns/Creational/SimpleFactory/diagram.png" alt="simple-factory" class="img-responsive" />
<strong>Простая Фабрика</strong> (англ. <strong>Simple Factory</strong>) - позволяет создавать объекты без логики их создания в клиенте.
Сам по себе не является шаблоном. Подход, при котором логика создания объектов выносится в отдельный класс.</p>

<p>Плюсы</p>
<ul>
  <li>Позволяет придерживаться принципа <strong>DRY</strong> (логика создания объекта описывается всего один раз, в последующем клиенты просто вызывают методы фабрики)</li>
  <li>Клиенты перестают быть сильно связаны с конкретными реализациями продуктов</li>
  <li>Позволяет быстро сменить логику создания объектов и конкретные реализации возвращаемых объектов</li>
</ul>

<p>Возьмем наш пример из <strong>Фабричного метода</strong>. Наш повар реализовывал интерфейс, по которому мы знали, что повар умеет готовить бургеры.
Суть простой фабрики в том что у нас есть класс повара(<strong><code class="highlighter-rouge">Chief</code></strong>), который умеет готовить бургеры.
Может быть другой класс повара, который будет, например, готовить пиццу. Этот повар будет уже другой простой фабрикой.
Как мы видим, пример почти не отличается от Фабричного метода, за исключением реализации интерфейса.</p>

<ul class="spoiler-list">


  <li>
  
      <b><i>Burgers</i></b>
      <ul class="spoiler-list">
  
    
  
    
        <li>
            <details>
              <summary> <b>Burger.php</b> </summary>
              
<figure class="highlight"><pre><code class="language-php" data-lang="php">              
<span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Burgers</span><span class="p">;</span>

<span class="sd">/**
 * Class Burger
 * @package DesignPatterns\Creational\SimpleFactory\Burgers
 */</span>
<span class="k">abstract</span> <span class="k">class</span> <span class="nc">Burger</span>
<span class="p">{</span>
    <span class="sd">/**
     * @var string
     */</span>
    <span class="k">protected</span> <span class="nv">$meat</span><span class="p">;</span>

    <span class="sd">/**
     * @var string
     */</span>
    <span class="k">protected</span> <span class="nv">$sauce</span><span class="p">;</span>

    <span class="sd">/**
     * @var bool
     */</span>
    <span class="k">protected</span> <span class="nv">$withCheese</span><span class="p">;</span>

    <span class="sd">/**
     * @return string
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getMeat</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">meat</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @param string $meat
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setMeat</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$meat</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">meat</span> <span class="o">=</span> <span class="nv">$meat</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @return string
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getSauce</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">sauce</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @param string $sauce
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setSauce</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$sauce</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">sauce</span> <span class="o">=</span> <span class="nv">$sauce</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @return bool
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getWithCheese</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withCheese</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @param bool $withCheese
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setWithCheese</span><span class="p">(</span><span class="nx">bool</span> <span class="nv">$withCheese</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withCheese</span> <span class="o">=</span> <span class="nv">$withCheese</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

              </code></pre></figure>

            </details>
          </li>
    
  
    
        <li>
            <details>
              <summary> <b>Cheeseburger.php</b> </summary>
              
<figure class="highlight"><pre><code class="language-php" data-lang="php">              
<span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Burgers</span><span class="p">;</span>

<span class="sd">/**
 * Class Cheeseburger
 * @package DesignPatterns\Creational\SimpleFactory\Burgers
 */</span>
<span class="k">class</span> <span class="nc">Cheeseburger</span> <span class="k">extends</span> <span class="nx">Burger</span>
<span class="p">{</span>
    <span class="sd">/**
     * @var string
     */</span>
    <span class="k">protected</span> <span class="nv">$meat</span> <span class="o">=</span> <span class="s1">'chicken'</span><span class="p">;</span>

    <span class="sd">/**
     * @var string
     */</span>
    <span class="k">protected</span> <span class="nv">$sauce</span> <span class="o">=</span> <span class="s1">'mayonnaise'</span><span class="p">;</span>

    <span class="sd">/**
     * @var bool
     */</span>
    <span class="k">protected</span> <span class="nv">$withCheese</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

              </code></pre></figure>

            </details>
          </li>
    
  
    
        <li>
            <details>
              <summary> <b>Hamburger.php</b> </summary>
              
<figure class="highlight"><pre><code class="language-php" data-lang="php">              
<span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Burgers</span><span class="p">;</span>

<span class="sd">/**
 * Class Hamburger
 * @package DesignPatterns\Creational\SimpleFactory\Burgers
 */</span>
<span class="k">class</span> <span class="nc">Hamburger</span> <span class="k">extends</span> <span class="nx">Burger</span>
<span class="p">{</span>
    <span class="sd">/**
     * @var string
     */</span>
    <span class="k">protected</span> <span class="nv">$meat</span> <span class="o">=</span> <span class="s1">'beef'</span><span class="p">;</span>

    <span class="sd">/**
     * @var string
     */</span>
    <span class="k">protected</span> <span class="nv">$sauce</span> <span class="o">=</span> <span class="s1">'ketchup'</span><span class="p">;</span>

    <span class="sd">/**
     * @var bool
     */</span>
    <span class="k">protected</span> <span class="nv">$withCheese</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

              </code></pre></figure>

            </details>
          </li>
    
  
  
  
    </ul>  
  

  <li>
  
    
  
    
        <li>
            <details>
              <summary> <b>Chef.php</b> </summary>
              
<figure class="highlight"><pre><code class="language-php" data-lang="php">              
<span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\SimpleFactory</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Burgers\Burger</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Burgers\Hamburger</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Burgers\Cheeseburger</span><span class="p">;</span>

<span class="sd">/**
 * Class Chef
 * @package DesignPatterns\Creational\SimpleFactory
 */</span>
<span class="k">class</span> <span class="nc">Chef</span>
<span class="p">{</span>
    <span class="sd">/**
     * @param string $typeBurger
     *
     * @return Burger
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">makeBurger</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$typeBurger</span><span class="p">)</span><span class="o">:</span> <span class="nx">Burger</span>
    <span class="p">{</span>
        <span class="nv">$typeBurger</span> <span class="o">=</span> <span class="nb">strtolower</span><span class="p">(</span><span class="nv">$typeBurger</span><span class="p">);</span>

        <span class="k">switch</span> <span class="p">(</span><span class="nv">$typeBurger</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s1">'cheeseburger'</span><span class="o">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nx">Cheeseburger</span><span class="p">();</span>
            <span class="k">case</span> <span class="s1">'hamburger'</span><span class="o">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nx">Hamburger</span><span class="p">();</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nx">\InvalidArgumentException</span><span class="p">(</span><span class="s1">'Sorry. But we haven\'t this burger.'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

              </code></pre></figure>

            </details>
          </li>
    
  
  
  


<div class="test-example">
<h2>Тест-пример: </h2>
<details>
<summary> <b> SimpleFactoryTest.php </b> </summary>
  
<figure class="highlight"><pre><code class="language-php" data-lang="php">  
<span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Tests\Creational\SimpleFactory</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">DesignPatterns\Creational\SimpleFactory\Chef</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">InvalidArgumentException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PHPUnit_Framework_TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SimpleFactoryTest</span> <span class="k">extends</span> <span class="nx">PHPUnit_Framework_TestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testHamburgerInstanceOfBurger</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$chef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chef</span><span class="p">();</span>

        <span class="nv">$hamburger</span> <span class="o">=</span> <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'hamburger'</span><span class="p">);</span>
        <span class="nv">$someHamburger</span> <span class="o">=</span> <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'hamburger'</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="s1">'DesignPatterns\Creational\SimpleFactory\Burgers\Burger'</span><span class="p">,</span> <span class="nv">$hamburger</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="s1">'DesignPatterns\Creational\SimpleFactory\Burgers\Burger'</span><span class="p">,</span> <span class="nv">$someHamburger</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotSame</span><span class="p">(</span><span class="nv">$hamburger</span><span class="p">,</span> <span class="nv">$someHamburger</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testCheeseburgerInstanceOfBurger</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$chef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chef</span><span class="p">();</span>

        <span class="nv">$cheeseburger</span> <span class="o">=</span> <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'cheeseburger'</span><span class="p">);</span>
        <span class="nv">$someCheeseburger</span> <span class="o">=</span> <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'cheeseburger'</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="s1">'DesignPatterns\Creational\SimpleFactory\Burgers\Burger'</span><span class="p">,</span> <span class="nv">$cheeseburger</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="s1">'DesignPatterns\Creational\SimpleFactory\Burgers\Burger'</span><span class="p">,</span> <span class="nv">$someCheeseburger</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotSame</span><span class="p">(</span><span class="nv">$cheeseburger</span><span class="p">,</span> <span class="nv">$someCheeseburger</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**
     * @expectedException InvalidArgumentException
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testException</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$chef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chef</span><span class="p">();</span>

        <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'someNameForBurger'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testHamburger</span><span class="err">С</span><span class="nx">omposition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$chef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chef</span><span class="p">();</span>

        <span class="nv">$hamburger</span> <span class="o">=</span> <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'hamburger'</span><span class="p">);</span>

        <span class="nv">$hamburgerMeat</span> <span class="o">=</span> <span class="nv">$hamburger</span><span class="o">-&gt;</span><span class="na">getMeat</span><span class="p">();</span>
        <span class="nv">$hamburgerSauce</span> <span class="o">=</span> <span class="nv">$hamburger</span><span class="o">-&gt;</span><span class="na">getSauce</span><span class="p">();</span>
        <span class="nv">$hamburgerWithCheese</span> <span class="o">=</span> <span class="nv">$hamburger</span><span class="o">-&gt;</span><span class="na">getWithCheese</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="s1">'beef'</span><span class="p">,</span> <span class="nv">$hamburgerMeat</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="s1">'chicken'</span><span class="p">,</span> <span class="nv">$hamburgerMeat</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="s1">'ketchup'</span><span class="p">,</span> <span class="nv">$hamburgerSauce</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="s1">'mayonnaise'</span><span class="p">,</span> <span class="nv">$hamburgerSauce</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="nv">$hamburgerWithCheese</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nv">$hamburgerWithCheese</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testCheeseburger</span><span class="err">С</span><span class="nx">omposition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$chef</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chef</span><span class="p">();</span>

        <span class="nv">$cheeseburger</span> <span class="o">=</span> <span class="nv">$chef</span><span class="o">-&gt;</span><span class="na">makeBurger</span><span class="p">(</span><span class="s1">'cheeseburger'</span><span class="p">);</span>

        <span class="nv">$cheeseburgerMeat</span> <span class="o">=</span> <span class="nv">$cheeseburger</span><span class="o">-&gt;</span><span class="na">getMeat</span><span class="p">();</span>
        <span class="nv">$cheeseburgerSauce</span> <span class="o">=</span> <span class="nv">$cheeseburger</span><span class="o">-&gt;</span><span class="na">getSauce</span><span class="p">();</span>
        <span class="nv">$cheeseburgerWithCheese</span> <span class="o">=</span> <span class="nv">$cheeseburger</span><span class="o">-&gt;</span><span class="na">getWithCheese</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="s1">'chicken'</span><span class="p">,</span> <span class="nv">$cheeseburgerMeat</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="s1">'beef'</span><span class="p">,</span> <span class="nv">$cheeseburgerMeat</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="s1">'mayonnaise'</span><span class="p">,</span> <span class="nv">$cheeseburgerSauce</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="s1">'ketchup'</span><span class="p">,</span> <span class="nv">$cheeseburgerSauce</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nv">$cheeseburgerWithCheese</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="nv">$cheeseburgerWithCheese</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

  </code></pre></figure>

</details>
</div>
</li></li></ul>

  </div>
</article>

</div>

<div class="wrapper-footer">
  <div class="container">
    <footer class="footer">
      



<a href="https://github.com/nixsolutions/design-patterns"><i class="svg-icon github"></i></a>








    </footer>
  </div>
</div>



</body>
</html>
